<!DOCTYPE html>
<html>
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">
		<title>jQuery Template Plugin</title>
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.min.js"></script>
		<script type="text/javascript" src="../src/jquery.template.plugin.js"></script>
		<script type="text/javascript" src="assets/sample.json"></script>
		<link rel="stylesheet" type="text/css" href="assets/style.css" />
	</head>
	<body class="text">
	
		<table class="input-form">
			<tr class="input-row">
				<td class="input-label text inputBorder">Template:</td>
				<td class="input-field text inputBorder">
					<textarea id="template" class="textArea50" name="template"><div class="row"><div>Book: {@:title} ({@:category})</div><div>Author: {@:author}</div><div>Price: ${@:price}</div></div></textarea>
				</td>
			</tr>
			<tr class="input-row">
				<td class="input-label text inputBorder">Data:</td>
				<td class="input-field text inputBorder">
					<textarea id="template-data" class="textArea100" name="template-data">[{"category": "reference","author": "Nigel Rees","title": "Sayings of the Century","price": 8.95},{"category": "fiction","author": "Evelyn Waugh","title": "Sword of Honour","price": 12.99},{"category": "fiction","author": "Herman Melville","title": "Moby Dick","isbn": "0-553-21311-3","price": 8.99},{"category": "fiction","author": "J. R. R. Tolkien","title": "The Lord of the Rings","isbn": "0-395-19395-8","price": 22.99}]</textarea>
				</td>
			</tr>
			<tr class="input-row">
				<td class="input-label text inputBorder">Property (Optional):</td>
				<td class="input-field text inputBorder">
					<input id="property" type="text" value="" />
					<span class="input-label">Default: null</span>
				</td>
			</tr>
			<tr class="input-row">
				<td colspan="2" class="buttonContainer">
					<input type="button" id="generate" name="Generate" value="Generate" />
				</td>
			</tr>
		</table>
		<div id="output" style="border: 1px solid #808080;">
		</div>
	</body>
	
	<script>
		$( document ).ready(function() {
			$( '#generate' ).click(function() {
				var template = $( '#template' ).val(),
					data = $.parseJSON( $( '#template-data' ).val() ),
					property = $( '#property' ).val(),
					result = null,
					html = '';
				
				result = $.fn.jsTemplate( template, data, property );
				
				$( result ).each(function(index) {
					html += result[index];
				})
				
				$( '#output' ).html( html ).show();
			});
		});
	</script>
</html>